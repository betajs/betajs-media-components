<div
    class="ba-ad-container {{linear ? (css + '-overlay') : ''}}
    {{cssadsplayer + (linear ? '-linear-ad-container' : '-non-linear-ad-container')}}
    {{adsplaying ? (cssadsplayer  + '-linear-ads-playing') : ''}}
    {{hideoninactivity ? (cssplayer + '-controlbar-hidden') : ''}}"
    ba-styles="{{floating ? {} : parentcontainersizingstyles}}"
    data-video="ima-ad-container" data-testid="{{testid}}-ads-player-container"
>
    <ba-ads-choices-link
        ba-if="{{showadchoices && adchoiceslink && adchoicesontop && adsplaying && !floating && !sidebar_active}}"
        ba-adchoiceslink="{{adchoiceslink}}"
        ba-cssadsplayer="{{cssadsplayer}}"
        ba-datatestselector="top-ads-choices-button"
        data-testid="{{testid}}-top-ads-choices-button"
    ></ba-ads-choices-link>

    <div ba-if="{{showactionbuttons && isoutstream}}"
        class="{{cssadsplayer}}-actions-button-container {{csscommon}}-center-all"
    >
        <div ba-if="{{showlearnmorebutton && moredetailslink}}">
            <button class="{{cssadsplayer}}-action-button" ba-click="{{redirect(moredetailslink)}}"
                title="{{moredetailstext ? moredetailstext : string('learn-more')}}"
                data-testid="{{testid}}-ads-player-more-details-button"
            >
                <i class="{{csscommon}}-icon-share"></i>
                {{moredetailstext ? moredetailstext : string('learn-more')}}
            </button>
        </div>
        <div ba-if="{{showrepeatbutton}}">
            <button class="{{cssadsplayer}}-action-button" ba-click="{{replay()}}"
                    title="{{repeatbuttontext ? repeatbuttontext : string('replay-ad')}}"
                    data-testid="{{testid}}-ads-player-replay-button"
            >
                <i class="{{csscommon}}-icon-cw"></i>
                {{repeatbuttontext ? repeatbuttontext : string('replay-ad')}}
            </button>
        </div>
        <div ba-if="{{!hideclosebutton}}">
            <button class="{{cssadsplayer}}-action-button {{cssadsplayer}}-reversed-color"
                    title="{{string('close-ad')}}" ba-click="{{close()}}"
                    data-testid="{{testid}}-ads-player-close-button"
            >
                <i class="{{csscommon}}-icon-cancel"></i>
                {{string('close-ad')}}
            </button>
        </div>
    </div>
</div>
<ba-{{dyncontrolbar}}
    ba-if="{{!hidecontrolbar && linear && !showactionbuttons}}"
    ba-css="{{css}}"
    ba-csscommon="{{csscommon}}"
    ba-cssadsplayer="{{cssadsplayer}}"
    ba-testid="{{testid}}"
    ba-template="{{tmplcontrolbar}}"
    ba-linear={{linear}}
    ba-duration="{{duration}}"
    ba-volume="{{volume}}"
    ba-muted="{{muted}}"
    ba-remaining="{{=remaining}}"
    ba-unmuteonclick="{{unmuteonclick}}"
    ba-playing={{playing}}
    ba-skipvisible="{{skipvisible}}"
    ba-userhadplayerinteraction="{{userhadplayerinteraction}}"
    ba-currenttime={{=currenttime}}
    ba-hideoninactivity={{hideoninactivity}}
    ba-tooltips="{{isMobile ? '' : tooltips}}"
    ba-adsplaying="{{adsplaying}}"
    ba-fullscreened="{{fullscreened}}"
    ba-view_type="{{view_type}}"
    ba-floating="{{floating}}"
    ba-adchoicesontop="{{adchoicesontop}}"
    ba-adchoiceslink="{{adchoiceslink}}"
    ba-adchoicesstring="{{string('ad-choices')}}"
    ba-controlbarstyles="{{controlbarstyles}}"
    ba-showadchoices="{{showadchoices}}"
    ba-event:resume="resume"
    ba-event:pause="pause"
    ba-event:stop="stop"
    ba-event:volume="set_volume"
    ba-event:fullscreen="{{trigger('fullscreen')}}"
    ba-event:toggle_volume="{{toggle_volume}}"
></ba-{{dyncontrolbar}}>
